{"ast":null,"code":"var _jsxFileName = \"/home/nadghantous/Desktop/nadghantousprojects/react/csis-myapp-test/src/components/AddPSU.js\";\nimport React, { Component } from 'react';\nimport '../App.css';\nimport { Link } from 'react-router-dom';\nimport { createUser } from '../actions/actions';\nimport adminsActions from \"../redux/actions/admins\";\nimport { connect } from \"react-redux\";\nimport { toast } from 'react-toastify';\nimport psusActions from '../redux/actions/powersupplies';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { keys } from '@material-ui/core/styles/createBreakpoints';\n\nclass AddPSU extends Component {\n  constructor(props) {\n    super(props); // This binding is necessary to make `this` work in the callback\n\n    this.notifysuccess = () => {\n      toast.success(\"PSU succesfully added!\");\n    };\n\n    this.notifyerror = () => {\n      toast.error(\"Failed to add PSU!\");\n    };\n\n    this.handlePSUName = event => {\n      event.preventDefault();\n      this.setState({\n        Pow_Name: event.target.value\n      });\n    };\n\n    this.handlePSUCapacity = event => {\n      event.preventDefault();\n      this.setState({\n        Pow_Capacity: event.target.value\n      });\n    };\n\n    this.handlePrice = event => {\n      event.preventDefault();\n      this.setState({\n        Price: event.target.value\n      });\n    };\n\n    this.addPSUFunct = this.addPSUFunct.bind(this);\n    this.state = {\n      Pow_Name: '',\n      Pow_Capacity: '',\n      Price: ''\n    };\n  }\n\n  componentDidMount() {\n    this.props.dispatch(psusActions.retrievePSUS());\n    let counter = 1;\n    const contents = this.props.psus.forEach((item, key) => {\n      counter = counter + 1;\n    });\n    console.log(counter);\n  }\n\n  async addPSUFunct(event) {\n    event.preventDefault();\n    let counter = 1;\n    let error = false;\n    const {\n      Pow_Name\n    } = this.state;\n    const {\n      Pow_Capacity\n    } = this.state;\n    const {\n      Price\n    } = this.state;\n    let price = Math.round(Price * 100) / 100;\n    const contents = this.props.psus.forEach((item, key) => {\n      if (item.Pow_Name.toLowerCase() === Pow_Name.toLowerCase()) {\n        error = true;\n      }\n\n      counter = counter + 1;\n    });\n\n    if (error) {\n      alert(\"Error, cannot insert a PSU that has the same name of another PSU component!\");\n    } else {\n      let psu = {\n        Pow_ID: counter,\n        Pow_Name: Pow_Name,\n        Pow_Capacity: Pow_Capacity,\n        Price: price\n      };\n      let result = await this.props.dispatch(psusActions.addPSU(psu));\n      this.setState({\n        result\n      });\n      console.log(this.props.didCreate);\n\n      if (this.props.didCreate) {\n        alert(\"The PSU has been succesfully added!\");\n        this.props.history.push(\"/adminhome\");\n        window.location.reload(false);\n      } else {\n        this.notifyerror();\n      }\n    }\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"col-lg-9 m-auto\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"card card-body\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      class: \"text-center mb-3\",\n      className: \"Label\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"i\", {\n      class: \"fas fa-sign-in-alt\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 58\n      }\n    }), \" PSU Insertion\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Link, {\n      className: \"link\",\n      to: \"/adminhome\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 13\n      }\n    }, \" Go back to Main Menu\"), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      id: \"over\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: \"psu.png\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 13\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"Label\",\n      for: \"Pow_Name\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 15\n      }\n    }, \"Power Supply Name:\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      type: \"text\",\n      onChange: this.handlePSUName,\n      id: \"Pow_Name\",\n      name: \"Pow_Name\",\n      placeholder: this.props.location.state !== undefined ? this.props.location.state.Pow_Name : 'Power Supply Name',\n      required: true,\n      size: \"10\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 256\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"Label\",\n      for: \"Pow_Capacity\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 15\n      }\n    }, \"Power Supply Capacity\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      type: \"text\",\n      id: \"Pow_Capacity\",\n      name: \"Pow_Capacity\",\n      onChange: this.handlePSUCapacity,\n      placeholder: this.props.location.state !== undefined ? this.props.location.state.Pow_Capacity : 'Power Supply Capacity',\n      required: true,\n      size: \"10\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 274\n      }\n    })), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"form-group\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      className: \"Label\",\n      for: \"Price\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 15\n      }\n    }, \"PSU Price:\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"form-control\",\n      type: \"text\",\n      id: \"Price\",\n      name: \"Price\",\n      onChange: this.handlePrice,\n      placeholder: this.props.location.state !== undefined ? this.props.location.state.Price : 'Price',\n      required: true,\n      size: \"10\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 232\n      }\n    })), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      onClick: this.addPSUFunct,\n      className: \"btn\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 11\n      }\n    }, \"Insert PSU\"))));\n  }\n\n}\n\nconst mapStateToProps = state => ({\n  addMessage: state.psuReducer.addMessage,\n  didCreate: state.psuReducer.didCreate,\n  psus: state.psuReducer.psus\n});\n\nexport default connect(mapStateToProps)(AddPSU);","map":{"version":3,"sources":["/home/nadghantous/Desktop/nadghantousprojects/react/csis-myapp-test/src/components/AddPSU.js"],"names":["React","Component","Link","createUser","adminsActions","connect","toast","psusActions","keys","AddPSU","constructor","props","notifysuccess","success","notifyerror","error","handlePSUName","event","preventDefault","setState","Pow_Name","target","value","handlePSUCapacity","Pow_Capacity","handlePrice","Price","addPSUFunct","bind","state","componentDidMount","dispatch","retrievePSUS","counter","contents","psus","forEach","item","key","console","log","price","Math","round","toLowerCase","alert","psu","Pow_ID","result","addPSU","didCreate","history","push","window","location","reload","render","undefined","mapStateToProps","addMessage","psuReducer"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport '../App.css';\nimport {Link} from  'react-router-dom';\nimport {createUser} from '../actions/actions';\nimport adminsActions from \"../redux/actions/admins\";\nimport { connect } from \"react-redux\";\nimport { toast } from 'react-toastify'\nimport psusActions from '../redux/actions/powersupplies';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { keys } from '@material-ui/core/styles/createBreakpoints';\n\nclass AddPSU extends Component{\n    constructor(props){\n        super(props);\n        // This binding is necessary to make `this` work in the callback\n        this.addPSUFunct = this.addPSUFunct.bind(this);\n        this.state = {Pow_Name: '', Pow_Capacity: '', Price: ''};\n    }\n    componentDidMount(){\n         this.props.dispatch(psusActions.retrievePSUS());\n         let counter = 1;\n          const contents = this.props.psus.forEach((item,key)=> {\n          counter = counter + 1;\n      });\n      console.log(counter);\n    }\n    notifysuccess = () => {\n      toast.success(\"PSU succesfully added!\");\n    }\n    notifyerror = () => {\n      toast.error(\"Failed to add PSU!\");\n    }\n  \n    handlePSUName = event => {\n      event.preventDefault();\n      this.setState({Pow_Name: event.target.value});\n    }\n    handlePSUCapacity = event =>{\n        event.preventDefault();\n        this.setState({Pow_Capacity: event.target.value});\n    }\n    handlePrice = event => {\n      event.preventDefault();\n      this.setState({Price: event.target.value});\n    }\n    async addPSUFunct(event){\n      \n      event.preventDefault();\n      let counter = 1;\n      let error = false;\n     \n      const {Pow_Name} = this.state;\n      const {Pow_Capacity} = this.state;\n      const {Price} = this.state;\n      let price = Math.round(Price*100)/100;\n      const contents = this.props.psus.forEach((item,key)=> {\n        if(item.Pow_Name.toLowerCase() === Pow_Name.toLowerCase()){\n          error = true;\n        }\n          counter = counter + 1;\n      });\n      if(error){\n        alert(\"Error, cannot insert a PSU that has the same name of another PSU component!\");\n      }\n      else{\n        let psu = {\n          Pow_ID: counter,\n          Pow_Name: Pow_Name,\n          Pow_Capacity: Pow_Capacity,\n          Price: price,\n        }\n        let result = await this.props.dispatch(psusActions.addPSU(psu));\n        this.setState({result});\n        console.log(this.props.didCreate);\n        if (this.props.didCreate) {\n          alert(\"The PSU has been succesfully added!\");\n          this.props.history.push(\"/adminhome\");\n          window.location.reload(false);\n          \n        }\n        else {\n         this.notifyerror();\n        }\n      }\n      \n    }\n    render() {\n  \n      return (\n        <div className=\"container\">\n          <div className=\"col-lg-9 m-auto\">\n          <div className=\"card card-body\">\n          <h2 class=\"text-center mb-3\" className=\"Label\"><i class=\"fas fa-sign-in-alt\"></i> PSU Insertion\n            </h2>\n            <br></br>\n            <Link className=\"link\" to=\"/adminhome\"> Go back to Main Menu</Link>\n            <br></br>\n            <div className=\"form-group\" id=\"over\">\n            <img src=\"psu.png\" ></img>\n            </div>\n            <div className=\"form-group \">\n              <label className=\"Label\" for=\"Pow_Name\">Power Supply Name:</label>\n              <input className=\"form-control\"  type=\"text\" onChange={this.handlePSUName} id=\"Pow_Name\" name=\"Pow_Name\" placeholder={(this.props.location.state !== undefined) ? this.props.location.state.Pow_Name : 'Power Supply Name'} required  size=\"10\"/><br/>\n            </div>\n            <div className=\"form-group\">\n              <label className=\"Label\" for=\"Pow_Capacity\">Power Supply Capacity</label>\n              <input className=\"form-control\" type=\"text\" id=\"Pow_Capacity\" name=\"Pow_Capacity\" onChange={this.handlePSUCapacity} placeholder={(this.props.location.state !== undefined) ? this.props.location.state.Pow_Capacity: 'Power Supply Capacity'} required  size=\"10\"/><br/>\n            </div>\n            <div className=\"form-group\">\n              <label className=\"Label\" for=\"Price\">PSU Price:</label>\n              <input className=\"form-control\" type=\"text\" id=\"Price\" name=\"Price\" onChange={this.handlePrice} placeholder={(this.props.location.state !== undefined) ? this.props.location.state.Price : 'Price'} required  size=\"10\"/><br/>\n            </div>\n          <br></br>\n          <br></br>\n          <button type=\"submit\" onClick={this.addPSUFunct} className=\"btn\">\n              Insert PSU\n            </button>\n          \n          </div>\n         </div>\n        </div>\n      );\n    }\n  }\n  const mapStateToProps = state => ({\n    addMessage: state.psuReducer.addMessage,\n    didCreate: state.psuReducer.didCreate,\n    psus: state.psuReducer.psus,\n\n  })\n  \n  export default connect(mapStateToProps)(AddPSU);"]},"metadata":{},"sourceType":"module"}